<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="braybaut">
<meta name="description"
    content="Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.
En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.
Instalación: Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.
Docker: Instalamos docker usando el script que se encuentra en su pagina oficial.
wget -qO- https://get.docker.com/ | sh Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.
systemctl start enable systemcl enable docker " />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/howto-instalando-rocket.chat-en-docker/" />


<title>
    
    Howto: Instalando Rocket.Chat en Docker :: Braybaut 
    
</title>



<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel="stylesheet"
    type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">


<link rel="stylesheet" href="/scss/main.min.68f52971e4ebd9aabb93e630af3dc92016c7dcfedd1f0e652a2911deab4e560f.css">



<link rel="stylesheet" type="text/css" href="/css/styles.scss">



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="/favicon.ico">
<meta name="theme-color" content="#252627"><meta itemprop="name" content="Howto: Instalando Rocket.Chat en Docker">
<meta itemprop="description" content="
Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.
En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.
Instalación:
Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.
Docker:
Instalamos docker usando el script que se encuentra en su pagina oficial.
wget -qO- https://get.docker.com/ | sh
Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.
systemctl start enable

systemcl enable docker
">
<meta itemprop="datePublished" content="2017-03-07T06:54:30+00:00" />
<meta itemprop="dateModified" content="2017-03-07T06:54:30+00:00" />
<meta itemprop="wordCount" content="573">



<meta itemprop="keywords" content="Docker,linux," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Howto: Instalando Rocket.Chat en Docker"/>
<meta name="twitter:description" content="
Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.
En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.
Instalación:
Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.
Docker:
Instalamos docker usando el script que se encuentra en su pagina oficial.
wget -qO- https://get.docker.com/ | sh
Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.
systemctl start enable

systemcl enable docker
"/>




<meta property="article:published_time" content="2017-03-07 06:54:30 &#43;0000 &#43;0000" />









    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/braybaut</span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/posts">Archive</a></li><li><a href="/archive">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">
        <div class="post-info">
            
            </p>
        </div>
        
        
        <article>

            <h2 class="post-title"><a href="/posts/howto-instalando-rocket.chat-en-docker/">Howto: Instalando Rocket.Chat en Docker</a></h2>

            
            <div class="post-content">
                <!-- raw HTML omitted -->
<p>Rocket.chat para mi es una de las mejores plataformas de chat <strong>OpenSource</strong> que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.</p>
<p>En este caso, realizaremos la instalación de Rocket.chat en <strong>docker</strong>, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.</p>
<h2 id="instalación">Instalación:</h2>
<p>Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara <strong>Docker Compose</strong>, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.</p>
<h3 id="docker">Docker:</h3>
<p>Instalamos docker usando el script que se encuentra en su pagina oficial.</p>
<pre><code class="language-console" data-lang="console">wget -qO- https://get.docker.com/ | sh
</code></pre><p>Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.</p>
<pre><code class="language-console" data-lang="console">systemctl start enable

systemcl enable docker
</code></pre><h3 id="docker-compose">Docker Compose:</h3>
<p>Hacemos uso de la ultima versión estable de docker compose que se encuentra en  github y dejamos el script en <strong>/usr/local/bin/docker-compose</strong></p>
<pre><code class="language-console" data-lang="console">curl -L &quot;https://github.com/docker/compose/releases/download/1.11.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
</code></pre><p>Aplicamos permisos de ejecución:</p>
<pre><code class="language-console" data-lang="console">chmod +x /usr/local/bin/docker-compose 
</code></pre><p>Verificamos la versión de docker-compose para mirar que se instalo la versión correcta:</p>
<pre><code class="language-console" data-lang="console">docker-compose --version
</code></pre><p><img src="/images/rocketchat2.png" alt=""></p>
<p>Ya que tenemos docker y docker-compose instalado, vamos a preparar el <strong>docker-compose.yml</strong> necesario para el despliegue de los contenedores y los directorios locales donde se almacenara la data.</p>
<h3 id="creando-los-directorios-locales-">Creando los directorios locales :</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p /opt/rocket.chat/data/runtime/db
mkdir -p /opt/rocket.chat/data/dump
</code></pre></div><h3 id="creando-el-docker-composeyaml">Creando el docker-compose.yaml</h3>
<p>Creamos y editamos el archivo docker-compose.yml</p>
<pre><code class="language-console" data-lang="console">vim /opt/rocket.chat/docker-compose.yml
</code></pre><div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">image</span>:<span style="color:#666"> </span>mongo<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">volumes</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- ./data/runtime/db:/data/db<span style="color:#666">
</span><span style="color:#666">    </span>- ./data/dump:/dump<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">command</span>:<span style="color:#666"> </span>mongod<span style="color:#666"> </span>--smallfiles<span style="color:#666">
</span><span style="color:#666"></span><span style="color:#6ab825;font-weight:bold">rocketchat</span>:<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">image</span>:<span style="color:#666"> </span>rocketchat/rocket.chat:latest<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">environment</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- MONGO_URL=mongodb://db:<span style="color:#3677a9">27017</span>/rocketchat<span style="color:#666">
</span><span style="color:#666">    </span>- ROOT_URL=http://chat.braybaut.com<span style="color:#666">
</span><span style="color:#666">    </span>- Accounts_UseDNSDomainCheck=True<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">links</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- db:db<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">ports</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- <span style="color:#3677a9">3000</span>:<span style="color:#3677a9">3000</span><span style="color:#666">
</span><span style="color:#666"></span><span style="color:#6ab825;font-weight:bold">hubot</span>:<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">image</span>:<span style="color:#666"> </span>rocketchat/hubot-rocketchat:v0<span style="color:#3677a9">.1.4</span><span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">environment</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- ROCKETCHAT_URL=<span style="color:#3677a9">192.168.0.26</span>:<span style="color:#3677a9">3000</span><span style="color:#666">
</span><span style="color:#666">    </span>- ROCKETCHAT_ROOM=GENERAL<span style="color:#666">
</span><span style="color:#666">    </span>- ROCKETCHAT_USER=Botname<span style="color:#666">
</span><span style="color:#666">    </span>- ROCKETCHAT_PASSWORD=BotPassw0rd<span style="color:#666">
</span><span style="color:#666">    </span>- BOT_NAME=Botname<span style="color:#666">
</span><span style="color:#666">    </span>- EXTERNAL_SCRIPTS=hubot-help,hubot-seen,hubot-links,hubot-greetings<span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">links</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- rocketchat:rocketchat<span style="color:#666">
</span><span style="color:#666"></span><span style="color:#999;font-style:italic">#Esto se utiliza para exponer el puerto de hubot para las notificaciones del host en el puerto 3001 para hubot-jenkins-notifier</span><span style="color:#666">
</span><span style="color:#666">  </span><span style="color:#6ab825;font-weight:bold">ports</span>:<span style="color:#666">
</span><span style="color:#666">    </span>- <span style="color:#3677a9">3001</span>:<span style="color:#3677a9">8080</span><span style="color:#666">
</span></code></pre></div><p>Editar los siguientes parámetros:</p>
<p><strong>ROOT_URL:</strong> El FQDN de nuestro host en este caso usare el dominio <strong>chat.braybaut.com // <em>En mi caso no voy a exponer el chat a internet, por el cual, este dominio es interno.</em></strong></p>
<p><strong>ROCKETCHAT_URL:</strong> Debemos usar la IP de nuestro host donde van a correr los contenedores que componen rocket.chat</p>
<p><strong>ROCKETCHAT_USER, ROCKETCHAT_PASSWORD y BOT_NAME:</strong> son valores que ya van a criterio de ustedes</p>
<h3 id="reglas-de-firewall">Reglas de Firewall</h3>
<p>Ya para terminar, aplicamos una regla de firewall para abrir el puerto 3000 el cual es el que utilizamos para acceder a rocket.chat</p>
<pre><code class="language-console" data-lang="console">firewall-cmd --add-port=3000/tcp --permanent
</code></pre><h3 id="descargando-imágenes-y-desplegando-contenedores">Descargando imágenes y desplegando contenedores</h3>
<p>Por ultimo, vamos a correr el archivo docker-compose.yml, en este archivo el bajara los 3 docker image necesarios y posteriormente iniciara un contenedor para cada uno, los docker image que se descargaran son: <strong>mongodb, rocket.chat (ultima versión) y hubot.</strong></p>
<p>Despues de bajar las imágenes docker-compose creara los contenedores y aplicara las configuraciones que se encuentran en el archivo docker-compose.yml.</p>
<p>Ingresamos al directorio:</p>
<pre><code class="language-console" data-lang="console">cd /opt/rocket.chat/
</code></pre><p>Ejecutamos Docker compose:</p>
<pre><code class="language-console" data-lang="console">docker-compose up
</code></pre><p>La primera vez que se ejecute docker-compose se demorara un poco, debido a que debe descargar los docker image, cuando se vuelva a ejecutar docker-compose la ejecución de los contenedores sera breve debido a que los docker image ya existen.</p>
<p>Después de ejecutar el comando anterior y nos aparezca la siguiente imagen quiere decir que el proceso de despliegue y ejecución a terminado y podemos acceder a nuestro rocket.chat.</p>
<p><img src="/images/rocketchat3.png" alt=""></p>
<p>Verificamos que los contenedores estén corriendo:</p>
<pre><code class="language-code" data-lang="code">docker ps -a
</code></pre><p><img src="/images/rocketchat4.png" alt=""></p>
<p>Ingresamos al navegador para ingresar al chat:</p>
<p><img src="/images/rocketchat5.png" alt=""></p>
<p>Con esto ya terminamos y comprobamos que nuestro Rocket.chat esta corriendo sin ningún inconveniente y lo mejor, en contenedores con persistencia de data.</p>
<p>Próximamente escribiré un articulo el cual explicare como subir estos contenedores usando <strong>systemctl.</strong></p>
<p>Mas información:</p>
<p>[<strong>https://rocket.chat/</strong>]</p>
<p>[<strong>https://github.com/RocketChat/Rocket.Chat</strong>]</p>
<p>[<strong>https://hub.docker.com/u/rocketchat/</strong>]</p>

            </div>

        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="/tags/docker">Docker</a></span><span class="tag"><a href="/tags/linux">linux</a></span>
  				</p>
  			</div>


                    <div id="comments" class="thin">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "braybaut" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
    </main>

            </div>

            
                


<footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="">Braybaut</a></span>
            
            <span></span>
            <span> <a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/js/bundle.7c1b69a274216adf96a8777b43114bf0d163ca44637d7b5acd3d29f1a71c64ae72f42ae83247967d11a3a5ee6fb7f501c1350e1e5931a23902f24da1c8bdf719.js" integrity="sha512-fBtponQhat&#43;WqHd7QxFL8NFjykRjfXtazT0p8accZK5y9CroMkeWfRGjpe5vt/UBwTUOHlkxojkC8k2hyL33GQ=="></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-69725711-1', 'auto');
        ga('send', 'pageview');
    </script>



    </body>
</html>
