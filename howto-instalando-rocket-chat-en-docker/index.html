<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="braybaut">
<meta name="description"
    content="
Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.
En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.
Instalación: Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.
Docker: Instalamos docker usando el script que se encuentra en su pagina oficial.
wget -qO- https://get.docker.com/ | sh Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.
systemctl start enable systemcl enable docker" />
<meta name="keywords" content="linux, container, docker, cloud, aws, golan, programming, DevOps" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://braybaut.com/howto-instalando-rocket-chat-en-docker/" />


<title>
    
    Howto: Instalando Rocket.Chat en Docker ::  
    
</title>



<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel="stylesheet"
    type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">


<link rel="stylesheet" href="https://braybaut.com/scss/main.min.2cb2cfcb2d25c14d702e06c24f9c05a189f6cbc9ef31f0a235fd739b411a5a1b.css">



<link rel="stylesheet" type="text/css" href="css/custom.css">



<link rel="apple-touch-icon" sizes="180x180" href="https://braybaut.com/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://braybaut.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://braybaut.com/favicon-16x16.png">
<link rel="manifest" href="https://braybaut.com/site.webmanifest">
<link rel="mask-icon" href="https://braybaut.com/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="https://braybaut.com/favicon.ico">
<meta name="theme-color" content="#252627">
<meta itemprop="name" content="Howto: Instalando Rocket.Chat en Docker">
<meta itemprop="description" content="

Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.

En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.

Instalación:

Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.

Docker:

Instalamos docker usando el script que se encuentra en su pagina oficial.

wget -qO- https://get.docker.com/ | sh

Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.

systemctl start enable

systemcl enable docker">


<meta itemprop="datePublished" content="2017-03-07T06:54:30&#43;00:00" />
<meta itemprop="dateModified" content="2017-03-07T06:54:30&#43;00:00" />
<meta itemprop="wordCount" content="630">



<meta itemprop="keywords" content="Centos,Docker,docker-compose,linux,opensource,rocket.chat,rocketchat," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://braybaut.com"/>

<meta name="twitter:title" content="Howto: Instalando Rocket.Chat en Docker"/>
<meta name="twitter:description" content="

Rocket.chat para mi es una de las mejores plataformas de chat OpenSource que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.

En este caso, realizaremos la instalación de Rocket.chat en docker, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.

Instalación:

Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara Docker Compose, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.

Docker:

Instalamos docker usando el script que se encuentra en su pagina oficial.

wget -qO- https://get.docker.com/ | sh

Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.

systemctl start enable

systemcl enable docker"/>



<meta property="article:section" content="Docker" />
<meta property="article:section" content="LINUX" />
<meta property="article:section" content="Opensource" />
<meta property="article:section" content="TUTORIALES" />

<meta property="article:published_time" content="2017-03-07 06:54:30 &#43;0000 &#43;0000" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://braybaut.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/Braybaut</span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://braybaut.com/about">About</a></li><li><a href="https://braybaut.com/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://braybaut.com/howto-instalando-rocket-chat-en-docker/">Howto: Instalando Rocket.Chat en Docker</a></h2>

            

            <div class="post-content">
                <p><a href="https://i0.wp.com/braybaut.com/wp-content/uploads/2017/03/rocket-chat.png?ssl=1" target="_blank"><img class="aligncenter size-full wp-image-824" src="https://i0.wp.com/braybaut.com/wp-content/uploads/2017/03/rocket-chat.png?resize=546%2C126&#038;ssl=1" alt="" width="546" height="126" srcset="https://i0.wp.com/braybaut.com/wp-content/uploads/2017/03/rocket-chat.png?w=546&ssl=1 546w, https://i0.wp.com/braybaut.com/wp-content/uploads/2017/03/rocket-chat.png?resize=300%2C69&ssl=1 300w" sizes="(max-width: 546px) 100vw, 546px" data-recalc-dims="1" /></a></p>

<p>Rocket.chat para mi es una de las mejores plataformas de chat <strong>OpenSource</strong> que existen, es muy flexible a la hora de adaptarlo y lo mejor, tiene cliente para toda las plataformas.</p>

<p>En este caso, realizaremos la instalación de Rocket.chat en <strong>docker</strong>, por el cual no importara la distribución linux que utilicemos, pero en este caso utilizare Centos 7 como host de mis contenedores para hacer el despliegue.</p>

<h2 id="instalación">Instalación:</h2>

<p>Vamos a usar varios contenedores y para lograr la comunicación entre ellos, se usara <strong>Docker Compose</strong>, el cual nos permite hacer despliegues de servicios el cual involucra varios contenedores.</p>

<h3 id="docker">Docker:</h3>

<p>Instalamos docker usando el script que se encuentra en su pagina oficial.</p>

<pre class="lang:default decode:true">wget -qO- https://get.docker.com/ | sh</pre>

<p>Al finalizar el proceso usamos systemctl para subir el servicio y dejarlo habilitado para que inicie cuando se inicie el servidor.</p>

<pre class="lang:default decode:true">systemctl start enable</pre>

<pre class="lang:default decode:true ">systemcl enable docker</pre>

<h3 id="docker-compose">Docker Compose:</h3>

<p>Hacemos uso de la ultima versión estable de docker compose que se encuentra en  github y dejamos el script en <strong>/usr/local/bin/docker-compose</strong></p>

<pre class="lang:default decode:true ">curl -L "https://github.com/docker/compose/releases/download/1.11.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</pre>

<p>Aplicamos permisos de ejecución:</p>

<pre class="lang:default decode:true ">chmod +x /usr/local/bin/docker-compose 
</pre>

<p>Verificamos la versión de docker-compose para mirar que se instalo la versión correcta:</p>

<pre class="lang:default decode:true ">docker-compose --version</pre>

<p><a href="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-06-23-48-00.png?ssl=1" target="_blank"><img class="size-full wp-image-851 aligncenter" src="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-06-23-48-00.png?resize=488%2C66&#038;ssl=1" alt="" width="488" height="66" srcset="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-06-23-48-00.png?w=488&ssl=1 488w, https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-06-23-48-00.png?resize=300%2C41&ssl=1 300w" sizes="(max-width: 488px) 100vw, 488px" data-recalc-dims="1" /></a></p>

<p>Ya que tenemos docker y docker-compose instalado, vamos a preparar el <strong>docker-compose.yml</strong> necesario para el despliegue de los contenedores y los directorios locales donde se almacenara la data.</p>

<h3 id="creando-los-directorios-locales">Creando los directorios locales :</h3>

<pre class="lang:default decode:true ">mkdir -p /opt/rocket.chat/data/runtime/db
mkdir -p /opt/rocket.chat/data/dump</pre>

<h3 id="creando-el-docker-compose-yaml">Creando el docker-compose.yaml</h3>

<p>Creamos y editamos el archivo docker-compose.yml</p>

<pre class="lang:default decode:true">vim /opt/rocket.chat/docker-compose.yml</pre>

<p>&nbsp;</p>

<pre class="lang:default decode:true">db:
  image: mongo
  volumes:
    - ./data/runtime/db:/data/db
    - ./data/dump:/dump
  command: mongod --smallfiles

rocketchat:
  image: rocketchat/rocket.chat:latest
  environment:
    - MONGO_URL=mongodb://db:27017/rocketchat
    - ROOT_URL=http://chat.braybaut.com
    - Accounts_UseDNSDomainCheck=True
  links:
    - db:db
  ports:
    - 3000:3000

hubot:
  image: rocketchat/hubot-rocketchat:v0.1.4
  environment:
    - ROCKETCHAT_URL=192.168.0.26:3000
    - ROCKETCHAT_ROOM=GENERAL
    - ROCKETCHAT_USER=Botname
    - ROCKETCHAT_PASSWORD=BotPassw0rd
    - BOT_NAME=Botname
    - EXTERNAL_SCRIPTS=hubot-help,hubot-seen,hubot-links,hubot-greetings
  links:
    - rocketchat:rocketchat
#Esto se utiliza para exponer el puerto de hubot para las notificaciones del host en el puerto 3001 para hubot-jenkins-notifier
  ports:
    - 3001:8080</pre>

<p>Editar los siguientes parámetros:</p>

<p><strong>ROOT_URL:</strong> El FQDN de nuestro host en este caso usare el dominio <strong>chat.braybaut.com // <em>En mi caso no voy a exponer el chat a internet, por el cual, este dominio es interno.</em></strong></p>

<p><strong>ROCKETCHAT_URL:</strong> Debemos usar la IP de nuestro host donde van a correr los contenedores que componen rocket.chat</p>

<p><strong>ROCKETCHAT_USER, ROCKETCHAT_PASSWORD y BOT_NAME:</strong> son valores que ya van a criterio de ustedes</p>

<h3 id="reglas-de-firewall">Reglas de Firewall</h3>

<p>Ya para terminar, aplicamos una regla de firewall para abrir el puerto 3000 el cual es el que utilizamos para acceder a rocket.chat</p>

<pre class="lang:default decode:true ">firewall-cmd --add-port=3000/tcp
firewall-cmd --add-port=3000/tcp --permanent</pre>

<h3 id="descargando-imágenes-y-desplegando-contenedores">Descargando imágenes y desplegando contenedores</h3>

<p>Por ultimo, vamos a correr el archivo docker-compose.yml, en este archivo el bajara los 3 docker image necesarios y posteriormente iniciara un contenedor para cada uno, los docker image que se descargaran son: <strong>mongodb, rocket.chat (ultima versión) y hubot.</strong></p>

<p>Despues de bajar las imágenes docker-compose creara los contenedores y aplicara las configuraciones que se encuentran en el archivo docker-compose.yml.</p>

<p>Ingresamos al directorio:</p>

<pre class="lang:default decode:true ">cd /opt/rocket.chat/
</pre>

<p>Ejecutamos Docker compose:</p>

<pre class="lang:default decode:true ">docker-compose up</pre>

<p>La primera vez que se ejecute docker-compose se demorara un poco, debido a que debe descargar los docker image, cuando se vuelva a ejecutar docker-compose la ejecución de los contenedores sera breve debido a que los docker image ya existen.</p>

<p>Después de ejecutar el comando anterior y nos aparezca la siguiente imagen quiere decir que el proceso de despliegue y ejecución a terminado y podemos acceder a nuestro rocket.chat.</p>

<p><a href="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-00-47-52.png?ssl=1" target="_blank"><img class="aligncenter size-full wp-image-853" src="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-00-47-52.png?resize=582%2C223&#038;ssl=1" alt="" width="582" height="223" srcset="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-00-47-52.png?w=582&ssl=1 582w, https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-00-47-52.png?resize=300%2C115&ssl=1 300w" sizes="(max-width: 582px) 100vw, 582px" data-recalc-dims="1" /></a></p>

<p>Verificamos que los contenedores estén corriendo:</p>

<pre class="lang:default decode:true ">docker ps -a</pre>

<p><a href="https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?ssl=1" target="_blank"><img class="aligncenter size-full wp-image-855" src="https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?resize=648%2C70&#038;ssl=1" alt="" width="648" height="70" srcset="https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?w=1264&ssl=1 1264w, https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?resize=300%2C33&ssl=1 300w, https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?resize=768%2C83&ssl=1 768w, https://i2.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-35-10.png?resize=1024%2C111&ssl=1 1024w" sizes="(max-width: 648px) 100vw, 648px" data-recalc-dims="1" /></a></p>

<p>Ingresamos al navegador para ingresar al chat:</p>

<p><a href="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?ssl=1" target="_blank"><img class="aligncenter size-full wp-image-857" src="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?resize=648%2C312&#038;ssl=1" alt="" width="648" height="312" srcset="https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?w=1278&ssl=1 1278w, https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?resize=300%2C144&ssl=1 300w, https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?resize=768%2C370&ssl=1 768w, https://i1.wp.com/braybaut.com/wp-content/uploads/2017/03/Screenshot-from-2017-03-07-01-36-40.png?resize=1024%2C493&ssl=1 1024w" sizes="(max-width: 648px) 100vw, 648px" data-recalc-dims="1" /></a></p>

<p>Con esto ya terminamos y comprobamos que nuestro Rocket.chat esta corriendo sin ningún inconveniente y lo mejor, en contenedores con persistencia de data.</p>

<p>Próximamente escribiré un articulo el cual explicare como subir estos contenedores usando <strong>systemctl.</strong></p>

<p>Mas información:</p>

<p>[<strong><a href="https://rocket.chat/" target="_blank">https://rocket.chat/</a></strong>][6]</p>

<p>[<strong><a href="https://github.com/RocketChat/Rocket.Chat" target="_blank">https://github.com/RocketChat/Rocket.Chat</a></strong>][7]</p>

<p>[<strong><a href="https://hub.docker.com/u/rocketchat/" target="_blank">https://hub.docker.com/u/rocketchat/</a></strong>][8]</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>[6]: <a href="http://Pagina" target="_blank">http://Pagina</a> oficial de Rocket.Chat
 [7]: <a href="http://Github" target="_blank">http://Github</a> de Rocket.Chat.
 [8]: <a href="http://Repositorio" target="_blank">http://Repositorio</a> de Docker Image de Rocket.Chat</p>
            </div>
        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://braybaut.com/tags/centos">Centos</a></span><span class="tag"><a href="https://braybaut.com/tags/docker">Docker</a></span><span class="tag"><a href="https://braybaut.com/tags/docker-compose">docker-compose</a></span><span class="tag"><a href="https://braybaut.com/tags/linux">linux</a></span><span class="tag"><a href="https://braybaut.com/tags/opensource">opensource</a></span><span class="tag"><a href="https://braybaut.com/tags/rocket.chat">rocket.chat</a></span><span class="tag"><a href="https://braybaut.com/tags/rocketchat">rocketchat</a></span>
  				</p>
  			</div>

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2019</span>
            
                <span><a href="https://braybaut.com">Braybaut</a></span>
            
            <span></span>
            <span> <a href="https://braybaut.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">rhazdon</a></span>
        </div>
    </div>
</footer>

            
        </div>

        





<script type="text/javascript" src="https://braybaut.com/js/bundle.4b80fbbfab88198dcef181b034822e60a3e68b1c128d1dc05392a32943a18ec2f866fbcd9ce31dcf84134397161647ad605ea5c25ecf12e5fcf9d28b47e64bb5.js" integrity="sha512-S4D7v6uIGY3O8YGwNIIuYKPmixwSjR3AU5KjKUOhjsL4ZvvNnOMdz4QTQ5cWFketYF6lwl7PEuX8&#43;dKLR&#43;ZLtQ=="></script>



    </body>
</html>
